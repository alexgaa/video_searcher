{% extends 'base_menu.html.twig' %}

{% block title %}Video Searcher{% endblock %}

{% block body %}
<style>
    .example-wrapper { margin: 1em auto; font: 14px sans-serif; padding: 2px 6px; }
</style>

<div class="example-wrapper">
    {% if result %}
        <b>В базе найдено {{ all }} записей:</b>
        <a href='{{path('file_result')}}' name='a_result_file' class="btn text-primary shadow-none">Сохранить в файл</a>
        <p class="error"><b>{{ error }}</b></p>

    <table class="table table-bordered table-hover" style="margin-bottom: 0">
        <thead class="thead-dark thead_calc">
        <tr>
            <th style="text-align:center" scope="col">URL</th>
            <th style="text-align:center" scope="col">User</th>
            <th style="text-align:center" scope="col">Url Video</th>
            <th style="text-align:center" scope="col">Image from the site</th>
            <th style="text-align:center" scope="col">Title</th>
            <th style="text-align:center" scope="col">Description</th>
            <th style="text-align:center" scope="col">Image youtube</th>
            <th style="text-align:center" scope="col">valid</th>
            <th style="text-align:center" scope="col">Date</th>

        </tr>
        </thead>
        <tbody>
        {% for  temp in result %}
        <tr>
            <td style="word-wrap:break-word"><b>{{ loop.index}}.)</b> <a href="{{ temp['url'] }}">{{temp['url'] }}</a></td>
            <td style="word-wrap:break-word">{{ temp['name_user'] }}</td>
            <td style="word-wrap:break-word"><a href="{{ constant('LINK_YOUTUBE')}}{{temp['id_video']}}">{{ constant('LINK_YOUTUBE')}}{{temp['id_video']}}</a></td>
            {% if temp['img_site']!=''%}
            <td style="word-wrap:break-word"><a href="{{ constant('LINK_LEXANI_IMG')}}{{temp['img_site']}}"><img src="{{ constant('LINK_LEXANI_IMG')}}{{temp['img_site']}}" width="100%"></a></td>
            {% else %}
                <td style="word-wrap:break-word"></td>
            {% endif %}
            <td style="word-wrap:break-word" title="{{ temp['title'] }}"> {{temp['title'] |slice(0, 50) }}{% if temp['title']|length > 50 %} <b>...</b>{%endif %}</td>
            <td style="word-wrap:break-word" title="{{ temp['description'] }}"> {{temp['description'] |slice(0, 50) }}{% if temp['description']|length > 50 %} <b>...</b>{%endif %}</td>
            <td style="word-wrap:break-word"><a href="{{ temp['img_youtube'] }}"><img src="{{ temp['img_youtube'] }}" width="100%"></a></td>
            <td style="word-wrap:break-word" class="text-danger">{{ temp['valid'] }}</td>
            <td style="word-wrap:break-word">{{ temp['date'] }}</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
        <br>
        <a href="{{ path('main') }}" class="btn btn-primary shadow-none text-white">Очистить</a>
    {% else %}
         <p><b>Нет данных!</b></p>
    {% endif %}
</div>
{% endblock %}
